{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\castr\\\\Documents\\\\GitHub\\\\radioorientefm\\\\frontend\\\\src\\\\contexts\\\\AudioContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AudioContextGlobal = /*#__PURE__*/createContext();\nexport const AudioProvider = ({\n  children\n}) => {\n  _s();\n  const audioRef = useRef(new Audio());\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [volume, setVolume] = useState(() => {\n    const saved = localStorage.getItem(\"radioVolume\");\n    return saved !== null ? Number(saved) : 1;\n  });\n  const [streamUrl, setStreamUrl] = useState(null);\n\n  // Cargar URL del backend\n  useEffect(() => {\n    fetch(\"/api/radio/station/\").then(res => res.json()).then(data => {\n      setStreamUrl(data.stream_url);\n      audioRef.current.src = data.stream_url;\n      audioRef.current.volume = volume;\n    }).catch(err => console.error(\"Error al cargar stream:\", err));\n  }, []);\n\n  // Mantener volumen actualizado\n  useEffect(() => {\n    audioRef.current.volume = volume;\n    localStorage.setItem(\"radioVolume\", volume);\n  }, [volume]);\n  const togglePlay = () => {\n    if (!streamUrl) return;\n    if (isPlaying) {\n      audioRef.current.pause();\n      setIsPlaying(false);\n    } else {\n      audioRef.current.play().catch(console.error);\n      setIsPlaying(true);\n    }\n  };\n  const toggleMute = () => {\n    setVolume(prev => prev > 0 ? 0 : 1);\n  };\n  return /*#__PURE__*/_jsxDEV(AudioContextGlobal.Provider, {\n    value: {\n      audioRef,\n      isPlaying,\n      togglePlay,\n      volume,\n      setVolume,\n      toggleMute,\n      streamUrl\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(AudioProvider, \"A64z8uH5SQSYnIgBmYIFu9KTxjw=\");\n_c = AudioProvider;\nvar _c;\n$RefreshReg$(_c, \"AudioProvider\");","map":{"version":3,"names":["React","createContext","useState","useRef","useEffect","jsxDEV","_jsxDEV","AudioContextGlobal","AudioProvider","children","_s","audioRef","Audio","isPlaying","setIsPlaying","volume","setVolume","saved","localStorage","getItem","Number","streamUrl","setStreamUrl","fetch","then","res","json","data","stream_url","current","src","catch","err","console","error","setItem","togglePlay","pause","play","toggleMute","prev","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/castr/Documents/GitHub/radioorientefm/frontend/src/contexts/AudioContext.js"],"sourcesContent":["import React, { createContext, useState, useRef, useEffect } from \"react\";\r\n\r\nexport const AudioContextGlobal = createContext();\r\n\r\nexport const AudioProvider = ({ children }) => {\r\n  const audioRef = useRef(new Audio());\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [volume, setVolume] = useState(() => {\r\n    const saved = localStorage.getItem(\"radioVolume\");\r\n    return saved !== null ? Number(saved) : 1;\r\n  });\r\n  const [streamUrl, setStreamUrl] = useState(null);\r\n\r\n  // Cargar URL del backend\r\n  useEffect(() => {\r\n    fetch(\"/api/radio/station/\")\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setStreamUrl(data.stream_url);\r\n        audioRef.current.src = data.stream_url;\r\n        audioRef.current.volume = volume;\r\n      })\r\n      .catch(err => console.error(\"Error al cargar stream:\", err));\r\n  }, []);\r\n\r\n  // Mantener volumen actualizado\r\n  useEffect(() => {\r\n    audioRef.current.volume = volume;\r\n    localStorage.setItem(\"radioVolume\", volume);\r\n  }, [volume]);\r\n\r\n  const togglePlay = () => {\r\n    if (!streamUrl) return;\r\n    if (isPlaying) {\r\n      audioRef.current.pause();\r\n      setIsPlaying(false);\r\n    } else {\r\n      audioRef.current.play().catch(console.error);\r\n      setIsPlaying(true);\r\n    }\r\n  };\r\n\r\n  const toggleMute = () => {\r\n    setVolume(prev => (prev > 0 ? 0 : 1));\r\n  };\r\n\r\n  return (\r\n    <AudioContextGlobal.Provider value={{\r\n      audioRef,\r\n      isPlaying,\r\n      togglePlay,\r\n      volume,\r\n      setVolume,\r\n      toggleMute,\r\n      streamUrl\r\n    }}>\r\n      {children}\r\n    </AudioContextGlobal.Provider>\r\n  );\r\n};\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1E,OAAO,MAAMC,kBAAkB,gBAAGN,aAAa,CAAC,CAAC;AAEjD,OAAO,MAAMO,aAAa,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC7C,MAAMC,QAAQ,GAAGR,MAAM,CAAC,IAAIS,KAAK,CAAC,CAAC,CAAC;EACpC,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACa,MAAM,EAAEC,SAAS,CAAC,GAAGd,QAAQ,CAAC,MAAM;IACzC,MAAMe,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;IACjD,OAAOF,KAAK,KAAK,IAAI,GAAGG,MAAM,CAACH,KAAK,CAAC,GAAG,CAAC;EAC3C,CAAC,CAAC;EACF,MAAM,CAACI,SAAS,EAAEC,YAAY,CAAC,GAAGpB,QAAQ,CAAC,IAAI,CAAC;;EAEhD;EACAE,SAAS,CAAC,MAAM;IACdmB,KAAK,CAAC,qBAAqB,CAAC,CACzBC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,IAAI;MACZL,YAAY,CAACK,IAAI,CAACC,UAAU,CAAC;MAC7BjB,QAAQ,CAACkB,OAAO,CAACC,GAAG,GAAGH,IAAI,CAACC,UAAU;MACtCjB,QAAQ,CAACkB,OAAO,CAACd,MAAM,GAAGA,MAAM;IAClC,CAAC,CAAC,CACDgB,KAAK,CAACC,GAAG,IAAIC,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEF,GAAG,CAAC,CAAC;EAChE,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA5B,SAAS,CAAC,MAAM;IACdO,QAAQ,CAACkB,OAAO,CAACd,MAAM,GAAGA,MAAM;IAChCG,YAAY,CAACiB,OAAO,CAAC,aAAa,EAAEpB,MAAM,CAAC;EAC7C,CAAC,EAAE,CAACA,MAAM,CAAC,CAAC;EAEZ,MAAMqB,UAAU,GAAGA,CAAA,KAAM;IACvB,IAAI,CAACf,SAAS,EAAE;IAChB,IAAIR,SAAS,EAAE;MACbF,QAAQ,CAACkB,OAAO,CAACQ,KAAK,CAAC,CAAC;MACxBvB,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC,MAAM;MACLH,QAAQ,CAACkB,OAAO,CAACS,IAAI,CAAC,CAAC,CAACP,KAAK,CAACE,OAAO,CAACC,KAAK,CAAC;MAC5CpB,YAAY,CAAC,IAAI,CAAC;IACpB;EACF,CAAC;EAED,MAAMyB,UAAU,GAAGA,CAAA,KAAM;IACvBvB,SAAS,CAACwB,IAAI,IAAKA,IAAI,GAAG,CAAC,GAAG,CAAC,GAAG,CAAE,CAAC;EACvC,CAAC;EAED,oBACElC,OAAA,CAACC,kBAAkB,CAACkC,QAAQ;IAACC,KAAK,EAAE;MAClC/B,QAAQ;MACRE,SAAS;MACTuB,UAAU;MACVrB,MAAM;MACNC,SAAS;MACTuB,UAAU;MACVlB;IACF,CAAE;IAAAZ,QAAA,EACCA;EAAQ;IAAAkC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACkB,CAAC;AAElC,CAAC;AAACpC,EAAA,CAvDWF,aAAa;AAAAuC,EAAA,GAAbvC,aAAa;AAAA,IAAAuC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}